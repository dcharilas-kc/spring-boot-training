**Exercise 8: Kafka notifications**

For this exercise it is assumed that you have Kafka installed. You can find guides for installation online, such as https://kafka.apache.org/quickstart.
Alternatively, you can use Docker https://towardsdatascience.com/how-to-install-apache-kafka-using-docker-the-easy-way-4ceb00817d8b.

Before starting the exercise, make sure you have a basic understanding of Kafka terminology. If you are not interested in learning more about Kafka, feel free to skip this exercise, as it is not required by the ones that follow.

All the below steps are meant for `user-service`.

| Step | Actions                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| a    | Add Kafka libraries. Create configuration classes `KafkaTopicConfig`, `KafkaProducerConfig`, `KafkaConsumerConfig` under package `config`. <br/> Kafka-related configuration should be added to `application.yml` or `application.properties`. You will need to produce messages in topic `users-notification` and consume messages from topic `users-modification`. <br/>Verify that the application deploys without problems before proceeding. |
| b    | Create `Notification` class under `package` model. It should have the fields, along with getters and setters:  <br/>- action (either `ADD` or `DELETE`)   <br/>- status (either `COMPLETED` or `PENDING`)                                                                                                                                                                                                                                         |
| c    | Each time a new user is successfully saved (in `UserService`) , dispatch a notification to topic `users-notification`. Action should be `ADD` and status `COMPLETED`.   <br/> Each time a user is successfully deleted (in `UserService`), dispatch a notification to topic `users-notification`. Action should be `DELETE` and status `COMPLETED`.                                                                                               |
| d    | Create `NotificationListener` class under package `message`. Add method annotated by `@KafkaListener` in order to consumer messages from topic `users-modification`.<br/> Upon receiving a new notification, first validate that the status is `PENDING`. Then, if the action is `ADD`, invoke the add user method from `UserService`. If the action is `DELETE`, invoke the delete user method from `UserService`.                               |
| e    | Test consumer by manually sending notification messages to topic `users-modification`. You will need to connect to Kafka shell for this and execute `bin/kafka-console-producer.sh --topic users-modification --bootstrap-server localhost:9092`. More details can be found in https://kafka.apache.org/quickstart.                                                                                                                               |
| f    | Update Unit Tests accordingly so that no errors exist.                                                                                                                                                                                                                                                                                                                                                                                            |